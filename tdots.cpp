#include "tdots.h"
#include <iostream>
#include <cmath>
#include <set>

using namespace std;



TDots::TDots(TImageBuffer *in, TImageBuffer *out) : TImageProcessor(in, out){
    tile_size = 64;
    filter_threshold = 100;
}

TDots::TDots(TImageBuffer *in, TImageBuffer *out, int t, int threshold) : TImageProcessor(in, out){
    tile_size = t;
    filter_threshold = threshold;
}

void TDots::process(){
    int h,w;
    int temp = 0;

    int pixel_color;
    int pixel_w = 0;
    int pixel_h = 0;

    int width = In->getWidth();
    int height = In->getHeight();

    int tile_padding = 3;
    vector<vector < int> > sat;

    dot_count = 0;

    //vector voor geheugen gebruik ipv array
    for(w = 0; w < width; w++){
        vector<int> temp;
        for(h = 0; h < height; h++){
           temp.push_back(255);
        }
        sat.push_back(temp);
    }

    for(w = 1; w < width; w++){
        for(h = 1; h < height; h++){
            sat[w][h] = In->getPixel(w,h) + sat[w-1][h] + sat[w][h-1] - sat[w-1][h-1];
        }
    }

    //doorloop de de spectrogram per tile
    for(int tile_width = 0; tile_width*tile_size < width; tile_width++){
        for(int tile_height = 0; tile_height*tile_size < height; tile_height++){


            //Het doorlopen van alle tegels
            pixel_color = 255;
            temp = 255;

            for(int i=0; i < tile_size; i++){
                for(int j=0;j < tile_size;j++){
                    w = tile_width*tile_size+j;
                    h = tile_height*tile_size+i;

                    if(h > tile_padding && w > tile_padding && h < height-tile_padding && w < width-tile_padding){
                        temp = (sat[w-tile_padding][h-tile_padding] + sat[w+tile_padding][h+tile_padding] - sat[w-tile_padding][h+tile_padding] - sat[w+tile_padding][h-tile_padding])/(tile_padding*tile_padding*4);
                    }

                    //zoek de donkerste pixel binnen de tegel. deze heeft de grootste intesiteit
                    if(temp < pixel_color){
                        pixel_color = temp;
                        pixel_h = h;
                        pixel_w = w;
                    }
                    Out->setPixel(w,h, In->getPixel(w,h));
                }
            }
            //marge om aantal punten lager te houden. Anders punt op elke tegel
            if(pixel_color < filter_threshold){
                mark(pixel_w, pixel_h);
            }

        }
    }
    cout << "Dots placed: " << dot_count << endl;
}

void TDots::mark(int x, int y){
    int pos_x, pos_y, dot_size;

    //groot van het stipje
    dot_size = 5;

    for(int i=0 ;i<dot_size; i++ ){
        for(int j=0; j<dot_size; j++){
            pos_x = x-((dot_size-1)/2)+i;
            pos_y = y-((dot_size-1)/2)+j;

            if(pos_x < In->getWidth() && pos_y < In->getHeight() && pos_x > 0 && pos_y > 0){
                Out->setPixel(pos_x, pos_y, 0);
            }
        }
    }
    setPoint(pos_x,pos_y);
}

void TDots::setPoint(int x, int y){
    dot_count++;
    points.push_back(make_pair(x,y));
}

void TDots::pairCalculation(){
    string arr[] = {"50|1|42","50|1|42","33|92|11","42|0|1","50|1|42","24|39|0","27|39|0","42|0|1","50|0|43","24|0|42","29|14|25","33|40|20","40|1|42","50|0|43","14|0|41","24|12|43","31|14|25","33|1|43","40|1|42","50|0|42","14|0|41","25|12|41","29|38|2","33|38|2","40|1|42","50|0|42","15|13|42","24|35|20","27|35|20","33|2|40","40|1|42","50|1|42","14|1|41","24|1|21","29|41|0","33|41|0","40|1|42","50|1|42","14|1|41","24|1|21","29|30|50","34|1|42","40|1|42","50|1|41","15|11|83","25|10|2","26|10|2","33|40|52","41|73|10","50|1|41","15|11|42","23|1|21","29|38|10","33|0|1","41|3|42","50|0|42","14|11|42","24|1|21","29|1|43","33|0|1","40|3|42","50|0|42","15|1|42","24|0|63","29|0|42","33|41|22","40|0|42","50|0|42","15|1|42","24|0|42","29|41|0","33|41|0","40|70|0","50|0|42","14|13|41","24|0|42","29|0|41","33|1|42","40|25|42","50|0|42","15|0|43","24|56|22","29|40|22","33|2|41","43|15|42","50|61|41","15|0|43","24|9|42","29|42|21","33|2|41","44|15|42","50|0|42","15|3|84","24|9|42","31|23|19","33|23|19","41|82|21","50|0|42","14|0|42","24|57|23","29|40|23","33|2|42","44|0|21","50|0|42","14|0|42","25|16|2","30|6|10","37|25|5","44|0|21","50|60|22","15|12|20","24|16|2","31|6|10","34|25|5","41|39|3","50|1|43","14|12|20","24|73|8","31|23|1","33|23|1","40|72|9","50|1|42","14|12|42","24|57|22","29|41|22","33|41|22","40|70|0","50|1|42","15|12|42","25|13|42","31|26|39","33|1|20","40|0|41","50|1|83","24|13|42","29|41|0","33|1|20","40|0|41","50|1|84","15|13|43","25|12|42","29|1|21","33|40|41","40|0|42","50|0|42","14|12|41","24|57|0","29|1|21","33|0|22","40|0|42","50|0|42","15|12|41","24|0|63","31|25|0","33|0|22","40|1|42","50|1|42","14|11|83","24|0|42","27|39|21","33|1|42","40|1|43","50|0|42","15|0|41","24|0|42","29|41|0","33|41|0","40|1|43","50|0|42","15|0|41","25|10|10","26|10|10","33|70|2","41|73|10","50|1|83","15|1|42","24|59|0","29|38|10","33|0|8","40|1|42","50|0|42","15|1|42","24|1|21","29|0|21","33|0|8","40|1|42","50|0|42","15|2|42","24|1|21","29|0|21","34|43|0","40|0|42","50|0|42","15|2|83","24|0|42","29|42|0","33|42|0","40|1|42","50|0|42","14|11|41","24|0|42","29|41|1","33|41|1","40|1|42","50|0|42","15|11|41","24|58|21","30|4|42","33|0|41","40|41|42","50|61|41","15|0|42","24|1|21","29|4|42","33|36|22","44|41|42","50|1|41","14|12|83","24|1|21","29|1|42","33|42|21","44|58|0","50|1|41","15|27|55","24|57|0","29|39|0","33|39|0","44|11|13","50|1|43","18|54|0","23|12|30","29|29|37","34|9|39","43|11|13","50|0|1","15|27|71","25|17|7","26|17|7","33|9|39","43|71|41","50|0|1","19|59|0","25|11|43","29|32|0","33|32|0","43|49|55","50|70|41","14|43|21","24|1|32","31|15|31","38|4|0","38|4|0","50|2|63","19|43|21","23|1|32","30|15|31","38|3|22","43|55|7","50|0|42","19|35|0","22|35|0","31|63|0","37|61|0","43|61|0","50|0|42","19|36|42","25|28|20","29|15|20","38|45|29","44|38|42","50|0|42","15|6|42","24|10|21","27|15|20","33|44|21","40|26|50","50|62|41","15|6|42","25|10|21","29|42|0","34|42|0","44|39|42","50|0|42","19|51|0","24|51|0","29|56|0","38|58|8","43|58|8","50|0|42","17|22|50","25|48|1","30|48|1","37|35|22","43|22|22","50|1|42","15|22|50","25|10|2","26|10|2","33|45|24","41|22|22","50|1|83","14|30|41","23|18|32","29|3|41","38|45|24","43|54|7","50|1|42","17|30|41","24|56|1","29|3|41","38|51|0","43|51|0","50|1|42","16|2|21","21|28|29","29|1|21","38|54|7","43|5|42","50|1|42","15|2|21","24|28|29","29|1|21","33|42|21","43|5|42","50|77|1","19|59|0","24|39|0","28|39|0","38|55|0","43|5|42","50|0|42","16|80|21","24|51|21","29|51|21","38|65|7","44|61|1","50|0|42","15|1|42","25|49|0","30|49|0","37|70|0","44|70|0","50|0|42","15|1|42","24|0|42","29|16|1","38|44|9","44|61|1","50|1|43","15|32|63","24|0|42","31|16|1","33|26|0","44|12|12","50|1|43","12|65|0","19|60|0","25|7|29","30|28|11","38|43|37","43|12|12","51|62|22","14|22|63","25|10|0","26|10|0","33|28|11","43|73|1","50|1|42","17|31|44","25|14|21","29|42|0","36|21|55","43|74|0","50|1|42","14|19|41","24|14|21","30|14|29","38|3|0","38|3|0","50|2|63","16|19|41","22|59|0","29|14|29","38|4|22","43|55|7","50|0|42","15|8|84","24|52|21","29|52|21","38|61|0","44|61|0","50|0|42","19|50|0","24|1|21","29|0|21","38|25|50","44|40|42","50|0|42","15|34|42","24|1|21","29|0|21","33|1|42","40|31|42","50|62|43","19|36|41","24|1|42","29|39|0","33|39|0","43|31|42","50|0|41","15|2|76","24|1|42","31|69|8","38|56|8","43|56|8","50|0|41","16|3|49","25|43|0","29|43|0","37|29|1","43|38|23","51|2|41","15|4|42","25|10|2","26|10|2","33|1|31","40|29|1","50|2|41","16|4|42","23|18|32","29|25|33","33|1|31","43|35|69","50|0|42","15|2|84","25|30|0","28|30|0","38|53|0","43|53|0","50|0|42","15|3|43","24|2|21","31|69|7","38|54|7","43|54|7","50|0|42","15|9|41","24|2|21","29|8|2","33|38|2","43|1|2","50|71|39","16|9|41","24|43|2","30|8|2","37|41|2","43|1|2","50|62|41","14|0|1","23|18|76","31|69|8","38|65|8","44|65|8","50|0|1","14|0|1","24|10|42","30|61|0","36|61|0","44|59|42","50|0|1","15|11|83","25|10|42","29|13|21","38|53|7","43|53|7","50|59|42","15|0|85","24|39|42","27|13|21","32|30|13","44|59|21","50|3|43","19|0|1","25|33|12","28|33|12","32|41|0","41|0|2","51|3|43","19|0|1","25|4|34","29|30|1","32|30|1","41|0|2","50|1|26","19|65|11","25|4|34","26|4|11","38|33|16","41|33|16","50|1|26","25|4|11","31|13|3","32|13|3","43|14|60","50|1|24","17|83|2","25|54|3","31|24|0","33|24|0","41|76|1","50|1|24","18|74|3","25|7|47","32|49|0","36|49|0","42|56|1","50|0|3","25|41|3","29|41|3","34|21|51","43|3|64","50|0|3","25|13|5","27|13|5","34|33|18","43|13|21","50|1|63","19|64|11","25|3|0","26|3|0","38|33|18","42|13|21","50|1|42","18|3|61","25|6|3","26|6|3","33|25|51","39|21|52","50|1|42","18|3|61","25|1|13","30|25|51","36|50|1","41|50|1","50|1|26","19|9|15","24|11|28","31|6|32","36|20|35","43|46|31","50|1|26","18|9|15","25|11|28","32|28|0","34|28|0","39|22|36","50|1|66","19|60|0","25|4|49","27|23|19","34|2|56","42|36|62","50|0|50","17|0|24","24|4|5","29|23|19","34|53|1","44|0|6","50|0|50","17|0|24","24|4|5","26|16|1","32|60|4","44|0|6","50|58|10","25|2|52","31|27|1","34|27|1","39|33|27","50|2|77","18|8|63","25|2|1","25|2|1","33|9|43","42|33|27","50|1|61","19|8|63","25|2|20","30|12|20","33|29|18","42|83|1","50|0|41","17|16|83","25|2|20","29|12|20","34|34|24","43|0|24","50|0|41","25|47|15","30|47|15","36|65|1","43|0|24","50|0|55","25|0|4","26|11|2","34|10|13","41|5|53","50|1|72","25|0|4","30|30|1","33|10|13","41|5|53","50|0|48","18|72|18","25|5|33","31|2|35","37|13|1","38|13|1","50|0|48","25|5|33","31|13|0","32|13|0","42|40|32","50|0|10","42|4|61","50|0|10","43|4|61","50|1|39","50|1|39","50|0|42","42|21|42","50|0|42","44|21|42","50|0|45","50|1|40","23|37|1","26|37|1","33|69|1","41|73|9","50|1|40","27|58|1","33|58|1","41|1|19","50|0|24","41|1|19","50|0|24","25|30|12","28|30|12","34|51|17","39|51|17","50|0|51","25|8|0","26|8|0","34|52|14","39|52|14","50|0|51","19|61|1","25|3|35","30|11|34","34|3|34","44|57|1","50|57|1","25|3|35","29|11|34","34|3|34","44|5|49","50|8|6","44|5|49","49|8|6","50|8|48","49|8|48","10|7|8","19|1|9","24|1|6","31|2|3","33|15|2","38|55|26","50|2|42","10|7|8","19|1|9","24|1|6","31|2|3","33|7|14","42|41|61","50|2|42","18|58|1","24|0|42","30|13|42","36|1|42","42|20|22","50|1|42","19|14|42","24|0|42","32|13|42","36|41|0","40|20|22","50|0|64","17|14|42","24|53|0","30|0|42","36|17|62","43|28|62","50|61|41","19|14|42","24|0|42","30|0|42","38|17|62","44|64|0","50|0|1","19|14|42","24|0|42","32|46|0","36|46|0","43|43|21","50|0|1","12|54|22","17|14|42","24|3|42","32|0|42","34|21|42","39|43|21","50|1|63","17|50|40","24|69|0","32|23|0","34|23|0","43|71|22","50|1|63","12|50|40","18|3|42","24|0|42","32|0|42","34|22|42","43|72|1","50|0|42","18|3|42","24|0|42","32|0|43","38|3|4","43|49|31","50|0|42","19|7|42","24|5|42","32|0|43","38|3|0","38|3|0","50|0|75","18|8|41","24|2|42","30|74|0","38|44|21","42|44|21","50|1|64","17|8|41","24|2|42","31|32|0","34|32|0","43|75|23","50|1|62","17|18|42","24|0|42","31|0|42","36|24|42","42|61|20","50|0|42","19|18|42","24|0|42","30|15|42","38|24|22","44|40|22","50|0|42","18|1|42","24|3|42","31|15|42","36|24|42","40|24|22","50|61|35","18|1|42","24|3|42","31|29|0","34|29|0","43|28|62","50|1|33","19|0|42","24|3|42","32|21|42","34|1|42","43|72|6","50|1|33","19|0|42","24|51|0","30|41|0","34|41|0","43|11|63","50|1|63","17|14|42","24|5|42","30|1|42","34|0|42","44|62|1","50|2|56","17|3|41","24|5|42","32|9|42","38|3|1","38|3|1","50|1|49","17|3|41","24|5|42","31|9|42","38|5|40","42|44|20","50|1|41","17|67|0","24|67|0","32|13|42","38|17|22","42|19|22","50|1|41","19|15|42","24|3|41","30|13|42","36|17|22","40|19|22","50|1|62","17|1|42","24|3|41","30|0|41","36|16|62","43|28|62","50|1|62","17|1|42","24|3|43","30|0|41","38|16|62","44|66|0","50|1|3","17|0|42","24|0|42","31|25|0","34|25|0","43|43|63","50|1|3","17|0|42","24|0|42","32|3|42","34|21|42","39|43|21","50|0|64","18|60|0","24|60|0","32|1|0","32|1|0","43|43|21","50|0|62","19|9|42","24|2|42","32|22|42","34|21|42","43|72|1","50|0|62","18|9|42","24|2|42","31|0|1","38|3|1","38|1|1","50|0|54","18|13|42","24|4|43","31|0|1","38|1|1","38|2|2","50|0|54","19|13|42","24|1|42","30|33|0","34|33|0","41|26|20","50|1|64","17|69|1","24|1|42","32|63|21","38|26|20","44|33|20","50|1|62","19|0|42","24|0|42","30|8|42","36|65|1","43|69|21","50|1|43","19|0|42","24|0|42","31|8|42","38|53|0","43|53|0","50|1|43","18|5|42","24|3|42","32|11|41","34|21|42","40|26|21","50|0|75","17|65|0","24|3|42","32|21|42","38|26|21","43|27|21","50|1|33","19|14|42","24|0|42","32|8|42","34|21|42","43|72|6","50|1|33","17|0|42","24|1|42","31|29|0","34|29|0","43|53|21","50|1|63","17|0|42","24|1|42","32|8|42","38|53|21","44|62|10","50|2|56","10|1|11","19|14|19","24|2|18","30|13|21","38|3|2","38|3|2","50|1|48","10|1|11","17|14|19","24|2|18","31|13|21","34|0|41","42|42|58","50|1|42","12|52|0","18|9|42","24|67|0","31|25|1","34|25|1","42|18|22","50|1|42","17|9|42","24|0|41","31|0|41","36|1|42","40|18|22","50|1|62","19|15|42","24|0|41","31|0|41","36|1|42","43|27|62","50|1|62","17|15|42","24|1|41","31|0|42","36|0|42","43|67|20","50|1|39","17|69|0","24|1|41","31|0|42","37|1|42","44|39|21","50|1|39","17|68|42","24|0|42","31|0|42","37|36|1","40|36|1","50|1|62","18|15|42","24|60|42","31|24|0","34|24|0","43|27|63","50|1|62","17|15|42","24|67|0","31|4|42","36|26|1","43|68|20","50|1|22","18|16|42","24|2|42","31|2|42","38|4|3","43|3|2","50|1|22","17|65|0","24|2|42","31|2|42","38|4|3","43|3|2","50|0|54","17|1|41","24|3|42","31|0|42","36|33|0","40|23|20","50|1|64","17|1|41","24|66|0","31|5|43","36|0|42","42|23|20","50|1|62","18|11|42","24|6|41","31|5|43","36|0|42","42|59|20","50|0|42","19|11|42","24|6|41","31|3|41","36|0|42","43|43|21","50|0|42","17|1|42","24|6|42","31|3|41","36|25|1","39|25|1","50|1|76","17|1|42","24|9|42","31|51|1","36|0|42","43|67|22","50|1|25","17|1|42","25|9|42","31|4|42","36|0|42","43|68|20","50|1|25","19|53|0","24|53|0","31|24|0","34|24|0","43|67|22","50|1|63","16|19|42","24|4|42","29|18|42","36|26|42","44|63|11","50|2|56","18|19|42","24|4|42","31|2|42","38|2|0","38|2|0","50|0|48","18|5|41","24|4|42","31|22|1","33|22|1","42|40|61","50|1|42","18|5|41","24|4|42","31|50|0","36|50|0","43|16|22","50|1|42","19|6|43","24|3|42","31|2|41","36|1|42","41|16|22","50|0|62","19|56|0","24|56|0","31|2|41","36|1|42","44|61|1","50|61|1","17|11|42","24|68|0","31|1|42","36|0|42","43|68|20","50|72|1","16|11|42","24|2|42","31|1|42","36|50|1","43|66|20","50|0|42","18|59|0","24|2|42","31|4|43","34|28|41","43|24|63","50|0|42","17|1|42","24|1|42","31|28|42","36|26|44","41|24|21","50|0|64","17|1|42","24|69|0","31|3|43","36|51|2","43|24|21","50|1|22","18|11|42","24|36|13","31|3|43","38|3|1","38|3|1","50|1|22","19|55|0","24|5|42","27|36|13","38|3|0","38|0|3","50|0|42","18|7|43","24|0|42","31|3|42","36|32|42","40|47|20","50|0|42","18|7|43","24|0|42","31|3|42","36|0|42","44|47|20","50|1|62","17|22|42","24|1|42","28|30|42","36|0|42","43|68|20","50|1|43","19|22|42","24|0|43","31|0|43","36|0|42","43|68|20","50|1|43","16|10|42","24|0|43","31|0|43","36|0|42","40|34|20","50|0|75","17|10|42","24|1|42","32|4|42","36|1|41","43|34|20","50|0|55","17|21|42","24|1|42","31|4|42","36|1|41","42|60|21","50|0|55","19|21|42","24|4|42","31|53|0","36|1|44","43|15|63","50|2|62","19|52|42","24|4|42","31|2|63","36|1|44","44|13|43","50|2|56","10|49|15","19|34|14","24|1|15","31|4|17","38|50|0","43|13|43","50|0|48","15|34|14","24|1|15","31|4|17","38|4|55","44|59|0","50|1|41","25|55|21","30|1|42","38|63|0","44|58|22","50|1|41","23|12|8","31|1|42","38|2|8","42|0|1","50|0|45","21|12|8","31|69|29","38|2|8","42|0|1","50|0|45","22|15|77","31|56|0","36|56|0","42|62|21","50|0|2","23|15|77","31|1|42","38|47|8","42|47|8","50|0|2","22|37|23","31|1|42","36|0|42","43|69|20","50|0|42","25|37|23","31|0|42","36|23|33","38|8|22","50|0|42","23|26|54","31|0|42","38|8|22","43|44|29","50|0|47","25|1|31","31|0|42","36|31|30","43|65|22","50|0|7","25|10|2","26|10|2","33|31|30","43|53|21","50|0|7","25|0|42","31|25|53","38|11|42","39|6|21","50|0|20","25|0|42","31|0|42","38|6|21","43|45|21","50|0|20","25|0|42","31|0|42","38|48|8","42|48|8","50|1|41","25|65|0","32|57|0","37|50|21","42|50|21","50|1|41","25|2|42","31|1|42","38|0|1","38|6|21","50|1|42","25|2|42","31|1|41","38|0|1","42|46|8","50|1|21","25|53|21","31|1|41","37|49|0","42|49|0","50|1|21","21|43|70","31|2|42","38|52|7","43|52|7","50|0|63","25|53|42","30|2|42","38|50|21","44|15|21","50|57|20","18|29|2","21|29|2","31|5|12","33|21|1","43|15|21","49|6|63","25|45|17","31|5|12","38|44|25","43|51|7","50|1|23","21|36|64","31|2|42","38|47|1","42|47|1","50|1|23","25|56|0","31|2|42","38|16|29","42|19|2","50|0|44","25|36|20","31|0|42","36|16|29","44|19|2","50|1|42","22|36|20","31|0|42","38|46|0","42|46|0","50|1|42","23|10|76","31|0|42","38|55|8","43|55|8","50|1|39","31|0|42","37|0|42","42|16|22","50|1|39","25|24|56","31|0|42","37|0|42","44|16|22","50|0|42","23|24|56","31|0|42","38|51|7","43|51|7","50|74|23","22|31|29","31|25|31","37|42|31","43|54|21","50|1|43","12|61|2","18|45|21","25|10|2","26|10|2","33|25|31","42|39|63","50|1|43","18|75|23","25|1|53","31|21|1","33|21|1","39|38|21","50|1|20","25|55|0","31|25|32","33|25|32","42|38|21","50|1|20","23|19|55","30|1|42","38|47|8","42|47|8","50|1|62","25|55|0","31|1|42","36|56|0","42|16|55","50|3|61","23|27|28","31|0|42","38|1|29","41|16|29","50|3|61","25|27|28","31|1|42","38|1|29","42|16|29","50|1|21","22|32|63","31|1|42","38|0|41","43|0|42","50|1|21","21|37|23","31|1|43","38|54|35","43|0|42","50|1|63","25|37|23","30|1|43","38|51|1","43|0|20","50|6|23","11|43|18","18|19|20","20|28|2","30|0|21","33|0|17","43|0|20","50|6|23","16|19|20","23|24|18","30|0|21","33|0|17","43|67|43","50|0|1","11|62|1","18|28|2","20|28|2","31|5|63","38|45|0","42|45|0","50|0|1","18|32|32","21|32|32","31|2|42","38|6|29","42|40|21","50|79|21","25|43|29","31|2|42","36|19|21","38|6|29","50|0|21","21|37|63","31|3|42","38|19|21","42|44|0","50|0|21","22|2|84","31|3|42","38|54|8","43|54|8","50|0|39","31|69|21","37|49|0","42|18|22","50|0|39","31|0|42","36|13|14","44|18|22","50|0|42","25|55|0","31|0|42","38|13|14","43|53|7","50|1|62","14|24|20","22|17|23","31|0|42","37|54|0","43|54|0","50|1|62","12|24|20","18|28|2","20|17|23","30|3|64","38|5|28","42|46|7","50|3|62","18|29|2","21|29|2","31|9|42","37|5|28","39|10|21","50|2|42","25|25|55","32|9|42","38|10|21","42|37|21","50|2|42","23|25|55","31|1|42","38|46|8","42|46|8","50|0|60","25|1|42","31|1|42","36|57|0","43|67|21","50|0|60","25|1|42","31|0|42","38|4|0","38|4|0","50|3|62","23|22|61","31|72|0","38|0|29","42|42|7","50|4|21","25|0|42","31|2|42","38|53|0","43|53|0","50|4|21","25|0|42","31|2|42","38|67|8","44|51|0","50|51|0","30|75|0","38|53|1","43|53|1","50|6|61","12|61|2","18|28|2","20|28|2","26|15|36","38|56|6","44|56|6","50|2|44","18|1|2","25|15|36","29|39|27","35|30|24","41|0|16","50|1|42","18|1|2","25|5|0","26|5|0","38|33|0","41|0|16","50|1|42","18|73|27","25|11|21","31|25|9","33|0|7","41|0|6","50|5|20","24|11|21","29|21|19","33|0|7","41|0|6","50|5|20","24|41|1","28|0|7","36|56|0","42|56|0","49|5|43","28|0|7","34|59|8","42|13|66","50|0|42","25|16|6","27|16|6","34|2|49","43|5|42","50|0|42","25|2|0","25|2|0","34|2|49","44|5|42","50|56|0","25|6|2","26|6|2","33|26|52","39|3|47","50|0|63","14|24|20","22|17|23","30|26|52","36|24|1","39|24|1","50|0|63","12|24|20","18|28|2","20|17|23","31|24|2","34|7|2","38|1|2","50|0|44","18|74|12","25|34|41","28|29|2","34|7|2","39|1|2","50|0|41","18|73|7","25|42|4","29|42|4","34|40|0","38|40|0","50|0|41","24|15|10","26|15|10","35|4|27","44|35|16","50|0|39","35|4|27","41|35|16","50|0|39","25|13|28","31|26|15","34|26|15","44|57|33","50|1|43","17|59|2","23|25|2","26|25|2","33|10|29","44|52|1","50|3|41","25|11|31","31|28|16","33|28|16","43|0|1","50|3|41","24|11|31","26|22|37","34|34|26","43|0|1","49|2|23","25|54|13","30|54|13","36|61|0","43|12|68","49|2|23","12|61|2","18|28|2","20|28|2","30|31|18","33|31|18","44|46|1","49|46|1","18|1|4","25|51|11","30|10|48","38|33|0","41|33|0","50|0|21","18|1|4","25|0|58","31|10|48","37|13|0","38|13|0","50|0|21","18|28|2","20|28|2","26|60|1","37|57|31","44|15|31","50|55|0","43|15|31","50|3|41","44|64|20","50|3|41","50|0|42","44|5|42","50|0|42","44|5|42","50|56|0","44|62|1","50|62|1","14|24|20","22|16|23","31|16|1","32|16|1","44|30|23","50|0|21","12|24|20","18|28|2","20|16|23","30|2|16","33|4|21","41|30|23","50|0|21","18|50|1","23|50|1","30|21|17","32|21|17","44|60|2","50|60|2","50|0|63","44|11|42","50|2|42","43|11|42","50|2|42","44|14|42","50|59|43","44|52|0","50|0|2","43|41|12","50|0|2","25|68|1","32|26|16","34|26|16","39|41|12","50|9|70","25|5|0","26|5|0","34|53|17","39|53|17","49|9|70","12|61|0","18|61|0","24|2|61","30|22|2","33|22|2","44|17|58","50|60|17","11|62|2","18|1|20","24|1|42","30|54|0","38|48|0","43|48|0","50|2|38","18|1|20","24|1|42","31|24|0","34|24|0","43|74|3","51|2|38","18|0|63","24|53|42","32|21|0","34|21|0","43|26|63","50|0|63","19|13|63","24|3|42","30|19|42","34|1|42","41|26|21","50|0|21","18|61|0","24|3|42","32|21|0","34|21|0","43|26|21","50|0|21","18|8|42","24|4|42","31|9|42","38|14|42","43|55|21","50|1|42","18|8|42","24|4|42","30|9|42","36|14|42","43|8|22","50|1|42","17|6|21","24|1|42","29|12|42","34|25|42","44|8|22","50|63|1","17|6|21","24|0|41","31|12|42","36|56|0","43|11|62","50|0|76","15|29|22","24|0|41","28|11|11","36|31|30","43|66|30","50|0|50","11|33|24","18|28|2","20|28|2","26|11|11","33|31|30","44|61|1","50|0|50","11|62|0","18|62|0","24|0|42","30|35|41","34|21|42","44|11|2","50|0|29","19|54|0","24|0|42","32|1|0","32|1|0","43|11|2","50|0|29","17|65|42","24|3|42","32|21|0","34|21|0","42|82|1","50|0|62","19|0|42","24|0|42","32|21|0","34|21|0","43|73|0","50|0|35","19|0|42","24|0|42","32|0|42","36|2|42","42|59|20","50|0|35","19|0|42","24|1|42","31|10|42","36|2|42","44|22|20","50|59|21","17|68|0","24|1|42","30|10|42","36|60|22","42|22|20","50|1|61","19|14|42","24|0|41","32|11|43","38|16|62","44|61|1","50|0|42","17|14|42","24|0|41","31|11|43","38|15|30","43|16|42","50|0|42","12|61|2","18|28|2","20|28|2","30|59|21","36|15|30","42|16|42","50|0|79","12|57|0","18|57|0","24|53|0","30|17|43","38|53|0","43|53|0","50|0|35","19|10|42","24|1|42","31|25|1","34|25|1","43|72|6","50|0|35","18|10|42","24|1|42","32|21|0","34|21|0","43|43|21","50|1|63","18|20|42","24|0|42","31|25|0","34|25|0","39|43|21","50|1|20","16|20|42","24|0|42","29|19|42","34|2|42","42|34|63","50|1|20","18|23|42","24|0|42","32|22|0","34|22|0","43|76|1","50|76|1","18|4|63","24|63|0","31|63|0","38|53|0","43|9|22","50|1|27","18|9|42","24|1|42","31|1|41","36|23|42","44|9|22","50|1|27","17|9|42","24|1|42","31|32|1","34|32|1","43|11|62","50|0|76","12|8|6","18|0|4","24|0|42","27|10|11","36|30|30","43|67|30","50|0|50","12|8|6","18|0|4","20|28|6","26|10|11","33|30|30","42|57|62","50|0|50","16|19|86","24|21|59","32|47|0","36|47|0","43|43|21","50|0|29","19|14|42","24|51|42","32|21|0","34|21|0","39|43|21","50|0|29","17|14|42","24|52|42","31|24|0","34|24|0","43|43|63","50|1|42","17|13|42","24|4|42","31|1|42","36|13|42","43|67|21","50|0|34","19|13|42","24|4|42","32|11|42","38|13|42","44|3|64","50|0|34","17|13|41","24|0|42","31|11|42","36|14|20","44|22|20","50|59|21","17|14|42","24|0|42","30|19|41","38|14|20","42|22|20","50|1|61","19|14|42","24|0|42","32|19|41","38|63|0","44|61|1","50|0|42","19|53|1","24|53|1","30|54|1","38|38|30","43|16|43","50|0|42","12|61|2","18|28|2","20|28|2","30|8|63","36|23|41","42|16|43","50|0|79","11|44|17","18|18|20","25|6|42","31|35|1","34|35|1","43|16|62","50|0|35","16|18|20","24|6|42","32|11|41","34|1|42","44|60|6","50|0|35","18|17|63","24|66|21","32|22|0","34|22|0","43|26|63","50|1|63","18|0|42","24|0|42","31|30|0","34|30|0","41|17|20","50|1|20","18|0|42","24|0|42","32|21|0","34|21|0","42|17|20","50|1|20","17|63|1","24|6|42","30|1|42","38|51|22","43|51|22","50|74|1","19|56|20","24|6|42","31|1|42","38|43|0","42|18|22","50|1|27","17|13|63","24|0|41","31|9|42","34|41|22","44|18|22","50|1|27","17|2|64","24|0|41","30|9|42","38|50|0","43|50|0","50|0|76","12|8|4","18|0|1","23|22|4","30|29|11","36|30|30","43|5|76","50|0|50","12|8|4","18|0|1","20|22|4","26|38|3","33|29|11","44|60|1","50|0|50","18|1|61","24|1|42","31|23|0","34|23|0","43|73|6","50|0|29","18|1|61","24|1|42","31|23|0","34|23|0","39|43|21","50|0|29","19|54|0","24|54|0","32|21|0","34|21|0","43|43|21","50|0|62","19|15|42","24|3|42","32|8|42","36|3|42","44|64|2","50|64|2","17|15|42","24|3|42","31|8|42","36|3|42","42|62|20","50|1|43","17|2|42","24|1|42","29|16|42","36|0|42","44|14|20","50|1|43","17|2|42","24|2|41","32|22|42","38|52|0","43|14|20","50|1|62","19|0|20","24|2|41","30|37|11","34|22|42","43|2|63","50|0|42","19|0|20","25|7|0","26|7|0","38|52|13","43|14|47","50|0|42","10|74|0","18|65|1","24|0|61","31|26|29","34|26|29","44|14|47","50|60|16","11|63|2","18|2|61","24|0|42","31|24|1","34|24|1","43|17|58","50|0|35","18|3|42","24|0|42","31|4|42","33|5|42","43|72|6","50|0|35","18|3|42","24|2|42","31|30|0","34|30|0","43|24|63","50|0|63","17|0|42","24|2|42","31|16|42","36|44|2","41|23|20","50|0|20","17|0|42","24|0|42","29|33|0","33|33|0","43|23|20","50|0|20","19|15|41","24|0|42","31|16|42","36|0|42","42|59|22","50|1|80","17|9|42","24|53|42","31|52|0","36|0|42","42|17|22","50|1|26","18|9|42","24|69|0","31|52|0","36|0|42","44|17|22","50|1|26","19|57|31","24|0|42","31|51|41","36|0|42","41|16|12","50|0|76","12|0|2","18|20|4","24|21|22","26|0|1","36|31|30","43|16|12","50|0|50","12|0|2","16|20|4","20|28|3","26|0|1","33|31|30","43|72|1","50|0|50","12|62|2","18|62|2","24|4|42","29|42|0","34|42|0","43|44|21","50|0|29","19|52|0","24|4|42","31|16|43","34|25|42","39|44|21","50|0|29","17|21|42","24|51|42","31|15|42","36|25|42","43|69|21","50|1|23","19|21|42","24|1|42","31|1|42","32|15|42","42|81|18","50|1|23","19|51|0","24|1|42","31|25|0","34|25|0","42|21|64","50|0|53","16|8|41","24|1|42","31|8|42","34|1|42","44|13|20","50|60|21","17|8|41","24|0|41","31|33|1","34|33|1","43|13|20","50|1|61","19|1|51","24|0|41","31|7|42","36|0|42","44|61|1","50|1|61","19|1|51","24|56|10","30|60|0","36|0|42","43|16|43","50|1|57","11|62|3","18|28|3","20|28|3","30|21|20","33|21|20","42|16|43","50|1|57","11|63|2","18|3|61","24|66|23","31|25|0","34|25|0","43|16|62","50|1|34","17|13|50","24|4|42","31|28|0","34|28|0","43|9|63","50|1|34","19|13|50","24|4|42","31|26|1","34|26|1","44|9|63","50|0|63","19|3|42","24|0|42","31|1|41","36|49|2","41|18|20","50|0|54","18|3|42","24|56|0","31|15|0","33|15|0","43|18|20","50|0|50","17|6|43","24|1|42","31|3|42","37|5|42","43|58|22","50|0|42","17|6|43","24|1|42","31|3|42","36|5|42","43|68|20","50|0|42","19|52|1","24|52|1","31|0|42","36|51|0","44|31|22","50|0|64","19|1|53","24|54|32","31|0|42","36|0|43","41|31|22","50|60|43","11|0|1","18|21|4","20|27|3","26|1|2","36|4|40","43|19|54","50|0|50","11|0|1","16|21|4","24|20|16","26|1|2","37|4|40","43|64|21","50|0|50","18|12|61","24|1|42","31|0|41","36|50|1","43|24|21","50|0|29","19|56|0","24|1|42","31|0|41","33|12|42","41|24|21","50|0|29","17|65|0","24|65|0","31|16|42","36|53|0","43|21|62","50|1|23","19|0|42","24|3|42","31|27|0","34|27|0","42|82|18","50|1|23","19|0|42","24|3|42","31|27|0","34|27|0","42|21|64","50|0|42","19|10|42","24|1|42","31|4|42","34|0|41","44|14|20","50|0|42","18|5|42","24|1|42","31|3|41","36|54|0","43|14|20","50|1|61","17|5|42","24|3|43","31|3|41","36|15|41","44|61|1","50|0|42","18|60|0","24|60|0","31|4|64","38|15|41","43|15|43","50|0|42","10|82|1","19|54|1","24|54|1","31|42|1","35|42|1","42|15|43","50|59|46","18|57|0","24|0|42","32|7|42","37|51|0","44|29|62","50|0|41","18|12|42","24|0|42","31|7|42","34|24|42","43|72|0","50|0|41","17|12|42","24|11|42","31|24|42","36|0|42","43|66|20","50|1|63","19|15|42","25|11|42","31|52|42","36|0|42","42|1|1","50|2|63","19|56|42","24|9|42","31|0|1","36|57|22","42|1|1","50|0|84","17|16|41","25|9|42","31|0|1","36|57|22","42|57|22","50|1|42","18|16|41","24|10|42","31|52|42","36|0|42","43|68|22","50|1|42","17|5|42","24|69|1","31|0|43","36|0|42","43|18|22","50|0|42","17|5|42","24|0|42","31|0|43","36|0|42","41|18|22","50|73|33","17|70|0","24|0|42","31|19|31","36|31|30","43|19|54","50|0|42","17|21|42","24|0|42","31|20|11","33|20|11","43|72|0","50|0|42","19|21|42","24|54|0","31|26|0","34|26|0","43|19|22","50|1|43","17|21|42","24|4|42","31|1|43","34|2|42","41|19|22","50|0|83","19|1|42","24|4|42","31|1|41","36|26|40","42|11|61","50|1|42","19|1|42","24|1|42","31|26|0","34|26|0","42|57|60","50|1|42","17|76|0","24|1|42","31|25|0","34|25|0","44|45|22","50|1|42","17|15|42","24|3|42","31|3|42","36|25|41","40|45|22","50|1|42","19|15|42","24|54|1","31|25|1","34|25|1","43|34|62","50|1|42","15|36|70","24|12|28","31|59|3","37|59|3","44|58|1","50|58|1","25|12|28","31|34|10","35|34|10","41|8|42","50|1|63","17|70|1","24|61|1","30|32|1","34|32|1","40|8|42","50|1|77","17|15|7","25|33|8","31|1|7","38|0|7","44|1|5","50|0|7","19|15|7","22|28|1","31|1|7","38|0|7","44|1|5","50|0|7","12|48|15","17|15|23","24|3|23","31|2|15","34|26|5","39|20|20","50|1|42","19|15|23","24|3|23","31|2|15","36|26|20","41|20|20","50|1|42","19|7|37","25|0|40","31|56|1","37|45|16","41|45|16","50|0|83","18|7|37","25|0|40","31|0|14","34|0|12","44|0|10","50|60|17","12|53|1","18|53|1","24|10|57","31|0|14","34|0|12","44|0|10","50|1|43","19|9|57","25|53|11","31|53|11","38|68|1","44|61|15","50|1|43","25|4|61","31|11|0","32|11|0","39|7|49","50|1|61","18|8|39","24|2|34","31|20|7","33|20|7","40|14|20","50|1|42","19|8|39","25|2|34","27|28|33","37|33|14","41|14|20","50|1|42","15|33|63","25|16|26","26|16|26","34|9|22","41|65|30","50|1|42","18|12|61","25|7|12","31|5|11","33|9|22","40|4|5","50|1|42","19|47|16","24|7|12","31|5|11","33|22|10","40|4|5","50|0|42","15|33|42","23|47|16","29|18|16","38|2|16","44|61|14","50|0|42","18|12|47","24|7|45","31|18|16","38|2|0","38|2|0","50|0|42","19|3|43","24|3|40","31|32|1","34|32|1","40|9|34","50|1|42","18|3|43","25|3|40","29|40|1","33|4|36","41|9|34","50|1|42","15|82|25","23|37|0","27|37|0","37|58|1","42|58|1","50|0|38","12|32|1","15|32|1","24|0|3","31|1|2","34|28|13","39|15|13","50|0|38","18|30|17","24|0|3","31|1|2","36|24|23","40|15|13","50|1|62","15|83|0","24|56|1","29|56|1","38|4|23","44|51|24","50|11|39","35|33|3","38|4|23","49|11|39","24|70|0","31|27|0","34|27|0","39|25|41","36|25|41"};
    vector<string> samples (arr, arr + sizeof(arr) / sizeof(arr[0]) );
//    cout << "string samples[] = {";
    for(unsigned int i=0; i < points.size(); i++){
        int min_distance = 99999999;

        pair< pair<int,int>, pair<int,int> > closest_pair;
        for(unsigned int j = 0;j < points.size(); j++){
            if(i != j){
                int temp = sqrt(pow(points[i].first-points[j].first, 2)+pow(points[i].second-points[j].second, 2));
                if(temp < min_distance){
                    min_distance = temp;
                    closest_pair.first = points[i];
                    closest_pair.second = points[j];
                }
            }
        }
        //todo:verwijderen dubbel paar
        pairs.push_back(closest_pair);
    }

    int match = 0;
    for(vector< pair< pair<int,int>, pair<int,int> > >::iterator it = pairs.begin(); it!=pairs.end(); it++){

        int freqEstimate = it->first.second/10;
        int deltaFreq = abs(it->first.second-it->second.second);
        int deltaTime = abs(it->first.first-it->second.first);
        string temp = "";
        temp.append(to_string(freqEstimate)).append("|").append(to_string(deltaFreq)).append("|").append(to_string(deltaTime));
        hashes.insert(temp);
//        cout << '"' << freqEstimate << "|" << deltaFreq << "|" << deltaTime << "\",";


    }

    for(set<string>::iterator it = hashes.begin(); it!=hashes.end(); it++){
        for(int j = 0; j < samples.size(); j++){
            if(*it == samples[j]){
                match++;
            }
        }
    }
    cout << "Matches: " << match/pairs.size()*100 << "%" << endl;
//    cout << "};" << endl;
//    cout << "("<< pairs[i].first.first << "," << pairs[i].first.second << ")" << "("<< pairs[i].second.first << "," << pairs[i].second.second << ")" << endl;
}
